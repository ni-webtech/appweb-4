<!-- BeginDsi "dsi/head.html" -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Embedthis Appweb 4.0.0 Documentation</title>
    <meta name="keywords" content="embedded web server, web server software, embedded HTTP, application web server, 
        embedded server, small web server, HTTP server, library web server, library HTTP, HTTP library" />
    <meta name="description" content="Embedthis Sofware provides commercial and open source embedded web servers for 
        devices and applications." />
	<meta name="robots" content="index,follow" />
	<link href="../../../doc.css" rel="stylesheet" type="text/css" />
	<link href="../../../print.css" rel="stylesheet" type="text/css" media="print"/>
    <!--[if IE]>
    <link href="../../../iehacks.css" rel="stylesheet" type="text/css" />
    <![endif]-->
</head>

<body>
    <div class="top">
        <a class="logo" href="http://appwebserver.org/">&nbsp;</a>
        <div class="topRight">
             <div class="search">
                 <form id="search" method="get" action="http://www.google.com/search" title="Search appwebserver.org">
                     <p>
                        <label for="q" title="Search">Search</label> 
                        <input type="text" id="q" name="q" size="15" maxlength="255" />
                        <input type="submit" id="submit" value="Go" /> 
                        <input type="hidden" name="domains" value="appwebserver.org" /> 
                        <input type="hidden" name="sitesearch" value="appwebserver.org" />
                    </p>
                 </form>
              </div>
            <!--TITLE-->Embedthis Appweb 4.0.0
        </div>
        <div class="crumbs">
            <a href="../../../product/index.html">Home</a>
<!-- EndDsi -->
             &gt; <a href="index.html">Programming Guide</a> &gt; <b>Serving Pages from ROM</b>
        </div>
    </div>
    <div class="content">
        <div class="contentRight">
            <h1>Quick Nav</h1>
            <ul>
                <li><a href="#compilingWebPages">Compiling Web Pages</a></li>
                <li><a href="#php">Using ROM with PHP</a></li>
            </ul>
<!-- BeginDsi "dsi/progGuideSeeAlso.html" -->
            <h1>See Also</h1>
            <ul class="nav">
                <li><a href="../../../guide/appweb/programmers/index.html">Programmers Guide</a></li>
                <li><a href="../../../guide/appweb/programmers/embedding.html">Embedding Appweb</a></li>
                <li><a href="../../../guide/appweb/programmers/modules.html">Custom Modules</a></li>
                <li><a href="../../../guide/appweb/programmers/stages.html">Pipeline Stages</a></li>
                <li><a href="../../../guide/appweb/programmers/migrating.html">Migrating to Appweb 3</a></li>
                <li><a href="../../../guide/appweb/programmers/rom.html">ROM Content</a></li>
                <li><a href="../../../guide/appweb/programmers/man.html">Manual Pages</a></li>
                <li><a href="../../../ref/appweb/index.html">Programmers Reference</a></li>
                <li><a href="../../../ref/appweb/architecture.html">Appweb Architecture</a></li>
                <li><a href="../../../api/native.html">Native APIs</a></li>
                <li><a href="../../../guide/appweb/users/index.html">Users Guide</a></li>
            </ul>
<!-- EndDsi -->
        </div>
        <div class="contentLeft">
            <h1>Serving Pages from ROM</h1>
            <p>To enable Appweb to be used on embedded systems without file systems, Appweb supports the compilation of
            web pages and configuration files into C code that can be stored in Read Only Memory (ROM) and fetched by
            Appweb to respond to relevant requests.</p>
            <p>Appweb has a virtual file system interface that allows the run-time switching between serving web pages
            on a disk-based file system and a compiled ROM based store of web pages.</p>
            <p>This ROM facility may also be used to enhance security by preventing the modification of web documents,
            or in performance critical situations were the serving of web pages from memory may be an effective
            optimization.</p><a name="compilingWebPages" id="compilingWebPages"></a>
            <h2 class="section">Compiling Web Pages</h2>
            <p>The Appweb <b>makerom</b> program is used to compile web documents, configuration files, and any other
            files that you would like to be compiled into C code. The makerom program will parse the files and convert
            them into C data structures which can then be compiled by your C/C++ compiler and linked into your
            application.</p>
            <p>For example:</p>
            <pre>
find web -type f -print &gt;fileList
makerom --files filelist &gt;romFiles.c
cc -o romFiles.o romFiles.c
</pre>
            <p>This will create a list of all the web files and then convert these files into C structures in the file
            romFiles.cpp.</p>
            <p>The <b>makerom</b> program takes two options:</p>
            <table title="Switches" class="width">
                <thead>
                    <tr>
                        <th>Switch</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>--prefix</td>
                        <td>Specifies a prefix to remove from each of the compiled file names.</td>
                    </tr>
                    <tr>
                        <td class="nowrap">-- name</td>
                        <td>Specifies the name of top level C structure. Appweb allows multiple ROM directories to be
                        included in a single application. This is necessary if using virtual hosts to allow each host
                        to have its own web directory.</td>
                    </tr>
                </tbody>
            </table>
            <p>It is important to include some essential Appweb configuration files into the ROM. These include the
            Appweb configuration file, the mime.types file, and any authorization database files. The following script
            is used to compile the web pages in three web directories ("sslWeb", "vhostWeb", and "web") and to also
            compile the essential configuration files.</p>
            <pre>
find sslWeb vhostWeb web -print &gt;rom.files \
echo -e '.\nappweb.conf\nmime.types\nusers.db\ngroups.db' &gt;&gt;rom.files
makerom rom.files &gt;romFiles.cpp
</pre><a name="php" id="php"></a>
            <h2 class="section">Using ROM with PHP</h2>
            <p>The ROM facility is supported by the following Appweb modules and handlers: fileHandler,
            espHandler and the sslModule.</p>
            <p>Ejscript and PHP do not support the Appweb ROM facility.</p>
        </div>
    </div>
<!-- BeginDsi "dsi/bottom.html" -->

	<div class="bottom">
		<p class="footnote"> 
            <a href="../../../product/copyright.html" >&copy; Embedthis Software LLC, 2003-2011. 
            All rights reserved. Embedthis, ESP, Ejscript and Appweb are trademarks of Embedthis Software LLC.</a>
		</p>
	</div>
<!-- EndDsi -->
</body>
</html>
