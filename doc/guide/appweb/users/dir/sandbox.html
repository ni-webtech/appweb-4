<!-- BeginDsi "dsi/head.html" -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Embedthis Appweb 4.0.0 Documentation</title>
    <meta name="keywords" content="embedded web server, web server software, embedded HTTP, application web server, 
        embedded server, small web server, HTTP server, library web server, library HTTP, HTTP library" />
    <meta name="description" content="Embedthis Sofware provides open source embedded web servers for devices 
        and applications." />
	<meta name="robots" content="index,follow" />
	<link href="../../../../doc.css" rel="stylesheet" type="text/css" />
	<link href="../../../../print.css" rel="stylesheet" type="text/css" media="print"/>
    <!--[if IE]>
    <link href="../../../../iehacks.css" rel="stylesheet" type="text/css" />
    <![endif]-->
</head>

<body>
    <div class="top">
        <a class="logo" href="http://appwebserver.org/">&nbsp;</a>
        <div class="topRight">
             <div class="search">
                 <form method="get" action="http://www.google.com/search" title="Search appwebserver.org">
                     <p>
                        <label title="Search">Search</label> 
                        <input type="text" id="q" name="q" size="15" maxlength="255" />
                        <input type="submit" id="submit" value="Go" /> 
                        <input type="hidden" name="domains" value="appwebserver.org" /> 
                        <input type="hidden" name="sitesearch" value="appwebserver.org" />
                    </p>
                 </form>
              </div>
            <!--TITLE-->Embedthis Appweb 4.0.0
        </div>
        <div class="crumbs">
            <a href="../../../../product/index.html">Home</a>
<!-- EndDsi -->
             &gt; <a href="../index.html">Users Guide</a> &gt; <a href="../configuration.html#directives">Configuration
            Directives</a> &gt; <b>Sandbox Directives</b>
        </div>
    </div>
    <div class="content">
        <div class="contentRight">
            <h2>Quick Nav</h2>
            <ul>
                <li><a href="#limitChunkSize">LimitChunkSize</a></li>
                <li><a href="#limitClients">LimitClients</a></li>
                <li><a href="#limitRequestBody">LimitRequestBody</a></li>
                <li><a href="#limitRequestFields">LimitRequestFields</a></li>
                <li><a href="#limitRequestFieldSize">LimitRequestFieldSize</a></li>
                <li><a href="#limitResponseBody">LimitResponseBody</a></li>
                <li><a href="#limitUrl">LimitUrl</a></li>
                <li><a href="#startThreads">StartThreads</a></li>
                <li><a href="#threadLimit">ThreadLimit</a></li>
                <li><a href="#threadStackSize">ThreadStackSize</a></li>
            </ul>
            <h2>See Also</h2>
            <ul>
                <li><a href="../logFiles.html">Logging Overview</a></li>
                <li><a href="../configuration.html">Configuration</a></li>
                <li><a href="../configuration.html#directives">Configuration Directives</a></li>
            </ul>
        </div>
        <div class="contentLeft">
            <a href="../configuration.html#directives"></a>
            <h1>Sandbox Directives</h1>
            <p>Appweb supports directives that limit its use of system resources such as memory and threads. This
            technique is know as "sandboxing" because it creates a limited / safer area in which Appweb
            executes.</p><a name="limitChunkSize" id="limitChunkSize"></a>
            <h2>LimitChunkSize</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Define the maximum chunk size</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>LimitChunkSize size</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LimitChunkSize 8192</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>This directive defines the maximum chunk size when using Transfer Chunk Encoding.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="limitClients" id="limitClients"></a>
            <h2>LimitClients</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Set the maximum number of simultaneous clients</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>LimitClient count</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LimitClient 10</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The LimitClient directive defines the maximum number of simultaneous client connections
                            that are permitted. Client connection requests in excess of this count will be rejected. A
                            limit of 0 means unlimited.</p>
                            <p>NOTE that many browsers can and will initiate multiple connections when requesting a
                            page.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="limitRequestBody" id="limitRequestBody"></a>
            <h2>LimitRequestBody</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Set the maximum size of the request body from the client.</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>LimitRequestBody limit</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LimitRequestBody 65536</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The LimitRequestBody directive defines a maximum size for the request body. For embedded
                            applications, it is useful to limit the request body to the expected maximum. This ensures
                            that rogue or malicious requests will not cause the server to allocate unwanted memory to
                            servicing the request.</p>
                            <p>The limit is an integer between zero and 2147483647 (2GB), where zero means unlimited.
                            If a request is received that is larger than the limit, it will be rejected and the client
                            will receive an error. The default limit is 64 MB.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="security">Security</td>
                        <td>
                            <p>This directive can be quite useful in certain denial-of-service attacks where the
                            attacker sends large documents of a certain type.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="limitRequestFields" id="limitRequestFields"></a>
            <h2>LimitRequestFields</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Maximum number of header lines in the request body from the client.</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>LimitRequestFields limit</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LimitRequestFields 64</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The LimitRequestFields directive defines a maximum number of header lines that may be in
                            a request from a client. For embedded applications, it is useful to limit the number of
                            header lines to the expected maximum. This ensures that rogue or malicious requests will
                            not cause the server to allocate unwanted memory to servicing the request. Typically, HTTP
                            requests will not have more than 15-20 header lines.</p>
                            <p>The limit is an integer between zero and 4096, where zero means unlimited. If a request
                            is received that has more header lines than the limit, it will be rejected and the client
                            will receive an error. The default limit is 40.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="security">Security</td>
                        <td>
                            <p>This directive can be quite useful in certain denial-of-service attacks where the
                            attacker sends requests with many spurious header lines.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="limitRequestFieldSize" id="limitRequestFieldSize"></a>
            <h2>LimitRequestFieldSize</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Maximum size of the request headers from the client</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>LimitRequestFieldSize limit</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LimitRequestFieldSize 65536</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The LimitRequestFieldSize directive defines the maximum size of the request header from
                            the client. For embedded applications, it is useful to limit the size of the header to the
                            expected maximum. This ensures that rogue or malicious requests will not cause the server
                            to allocate unwanted memory to servicing the request. Typically, HTTP requests will not
                            have more than 4K of header data.</p>
                            <p>The limit is an integer between zero and 1 MB, where zero means unlimited. If a request
                            is received that has a header larger than the limit, it will be rejected and the client
                            will receive an error. The default limit is 8 K.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="security">Security</td>
                        <td>
                            <p>This directive can be quite useful in certain denial-of-service attacks where the
                            attacker sends requests with large bogus headers.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="limitResponseBody" id="limitResponseBody"></a>
            <h2>LimitResponseBody</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Set the maximum size of the response body buffered by a dynamic Appweb handler.</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>LimitResponseBody number</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LimitResponseBody 65536</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The LimitResponseBody directive defines the maximum size for response body data.
                            <p>NOTE: this is a proprietary directive of Appweb and is not supported by Apache.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="limitStageBuffer" id="limitStageBuffer"></a>
            <h2>LimitStageBuffer</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Defines the pipline stage buffer size</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>LimitStageBuffer size</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LimitStageBuffer 8192</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>This directive defines the maximum buffer size in bytes for each stage in the request
                            pipeline. This directive places a limit on the amount of memory consumed by pipeline stages.
                            <p>NOTE: this does not imply a maximum response size (See LimitResponseBody for that
                            functionality). It merely limits the memory consumed when trying to buffer the response data. 
                            Appweb handlers will flush the buffers and use HTTP/1.1 chunked output if the amount of 
                            response data exceeds the output buffer size.</p>
                            <p>NOTE: this is a proprietary directive of Appweb and is not supported by Apache.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="limitUrl" id="limitUrl"></a>
            <h2>LimitUrl</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Maximum size of a URL in a request from a client.</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>LimitUrl limit</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LimitUrl 4096</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The LimitUrl directive defines the maximum size of a URL in Appweb. IFor embedded
                            applications, it is useful to limit the number of header lines to the expected maximum.
                            This ensures that rogue or malicious requests will not cause the server to allocate
                            unwanted memory to servicing the request.</p>
                            <p>The limit is an integer between zero and 256 K where zero means unlimited. If a request
                            is received that has a URL larger than the limit, it will be rejected and the client will
                            receive an error. The default limit is 4 K.</p>
                            <p>NOTE: this is a proprietary directive of Appweb and is not supported by Apache.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="security">Security</td>
                        <td>
                            <p>This directive can be quite useful in certain denial-of-service attacks where the
                            attacker sends requests with bogus URLs.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="startThreads" id="startThreads"></a>
            <h2>StartThreads</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Number of threads to preallocate in the Appweb thread pool</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>StartThreads number</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>StartThreads 100</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The StartThreads directive will preallocate the specified number of threads on startup
                            and then ensure that the thread pool always has at least this number of threads.</p>
                            <p>Appweb will automatically adjust the number of pool thread between the minimum specified
                            by this directive and the maximum specified by the ThreadLimit directive or via the Appweb
                            command line. Appweb will prune idle threads to reduce resource consumption as
                            required.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="threadLimit" id="threadLimit"></a>
            <h2>ThreadLimit</h2>
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Maximum number of threads to allocate for the Appweb thread pool.</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>ThreadLimit number</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>ThreadLimit 8</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The ThreadLimit directive defines a maximum number of threads for the Appweb thread
                            pool. When running in multithreaded mode, Appweb will use a pool thread to service each
                            request and then will return the thread to the pool. This results in a highly responsive
                            and scalable architecture with excellent throughput characteristics. Each thread requires a
                            thread stack and thus consumes memory. By limiting the number of threads, memory can be
                            conserved.</p>
                            <p>If the maximum number of threads is also specified via the <a href=
                            "../starting.html#appwebOptions">Appweb command line</a>, the command line value will take
                            precedence.</p>
                            <p>Appweb will automatically adjust the number of pool thread between the minimum specified
                            by the StartThreads directive and the maximum specified by this directive. Appweb will
                            prune idle threads to reduce resource consumption as required.</p>
                        </td>
                    </tr>
                </tbody>
            </table><a name="threadStackSize" id="threadStackSize"></a>
            <h2>ThreadStackSize</h2><br />
            <table class="directive" summary="" width="100%">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Define the size of the stack to allocate for each thread</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>ThreadStackSize limit</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>ThreadStackSize 65536</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The ThreadStackSize directive defines the size of the thread stack to allocate for each
                            thread. The limit is an integer between zero and an operating system defined maximum&nbsp;
                            where zero means use the system default. The default limit is 0 which implies the system
                            default.</p>
                            <p>If you are experiencing crashes when running multi-threaded and Appweb runs without
                            error when running single-threaded, you may need to increase this value. See the <a href=
                            "../starting.html#appwebOptions">Appweb command line</a> for details on running single user
                            by setting the "-p 0" option.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
<!-- BeginDsi "dsi/bottom.html" -->

	<div class="bottom">
		<p class="footnote"> 
            <a href="../../../../product/copyright.html" >&copy; Embedthis Software LLC, 2003-2011. 
            All rights reserved. Embedthis, Ejscript and Appweb are trademarks of Embedthis Software LLC.</a>
		</p>
	</div>
<!-- EndDsi -->
</body>
</html>
