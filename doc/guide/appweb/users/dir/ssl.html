<!-- BeginDsi "dsi/head.html" -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Embedthis Appweb 4.0.0 Documentation</title>
    <meta name="keywords" content="embedded web server, web server software, embedded HTTP, application web server, 
        embedded server, small web server, HTTP server, library web server, library HTTP, HTTP library" />
    <meta name="description" content="Embedthis Sofware provides commercial and open source embedded web servers for 
        devices and applications." />
	<meta name="robots" content="index,follow" />
	<link href="../../../../doc.css" rel="stylesheet" type="text/css" />
	<link href="../../../../print.css" rel="stylesheet" type="text/css" media="print"/>
    <!--[if IE]>
    <link href="../../../../iehacks.css" rel="stylesheet" type="text/css" />
    <![endif]-->
    <link href="http://www.google.com/cse/style/look/default.css" type="text/css" rel="stylesheet" />
</head>

<body>
    <div class="top">
        <a class="logo" href="http://appwebserver.org/">&nbsp;</a>
        <div class="topRight">
            <div class="search">
                <div id="cse-search-form"></div>
                <div class="version">Embedthis Appweb 4.0.0</div>
            </div>
        </div>
        <div class="crumbs">
            <a href="../../../../index.html">Home</a>
<!-- EndDsi -->
             &gt; <a href="../index.html">Users Guide</a> &gt; <a href="../configuration.html#directives">Configuration
            Directives</a> &gt; <b>SSL Directives</b>
        </div>
    </div>
    <div class="content">
        <div class="contentRight">
            <h1>Quick Nav</h1>
            <ul>
                <li style="list-style: none"><a href="#sslEngine">SSLEngine</a></li>
                <li><a href="#sslProtocol">SSLProtocol</a></li>
                <li><a href="#sslCipherSuite">SSLCipherSuite</a></li>
                <li><a href="#sslCertificateFile">SSLCertificateFile</a></li>
                <li><a href="#sslCertificateKeyFile">SSLCertificateKeyFile</a></li>
                <li><a href="#sslCaCertificateFile">SSLCACertificateFile</a></li>
                <li><a href="#sslCaCertificatePath">SSLCACertificatePath</a></li>
                <li><a href="#sslVerifyClient">SSLVerifyClient</a></li>
            </ul>
            <h1>See Also</h1>
            <ul>
                <li><a href="../ssl.html">SSL Guide</a></li>
                <li><a href="../configuration.html">Configuration</a></li>
                <li><a href="../configuration.html#directives">Configuration Directives</a></li>
            </ul>
        </div>
        <div class="contentLeft">
            <h1>SSL Directives</h1><a id="sslEngine"></a>
            <h2>SSLEngine</h2>
            <table class="directive" title="directive">
                <thead>
                    <tr>
                        <th class="pivot">Description</th>
                        <th>Enable SSL processing.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>SSLEngine [on | off]</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server, Virtual Host</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>&lt;VirtualHost *:443&gt;<br />
                        &nbsp; &nbsp; SSLEngine on<br />
                        &lt;/VirtualHost&gt;</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The SSLEngine directive enables SSL processing for the enclosing block of directives.
                            They may be for either the default server or a Virtual Host.</p>
                            <p>By default the SSL engine is not enabled.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <a id="sslProtocol"></a>
            <h2>SSLProtocol</h2>
            <table class="directive" title="directive">
                <thead>
                    <tr>
                        <th class="pivot">Description</th>
                        <th>Specify the SSL protocols to enable.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>SSLProtocol [+ | -] protocol ...</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server, Virtual Host</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>SSLProtocol all -SSLV2</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The SSLProtocol directive defines which SSL protocol variants to enable for use. The
                            following protocol options are available:</p>
                            <h3>SSLv2</h3>
                            <p>This is the original Secure Sockets Layer (SSL) protocol defined by Netscape. It has
                            several flaws and should not be used if SSLv3 or TLSv1 are available.</p>
                            <h3>SSLv3</h3>
                            <p>This is the Secure Sockets Layer (SSL) protocol version 3.</p>
                            <h3>TLSv1</h3>
                            <p>This is the Transport Layer Security (TLS) protocol version 1. It is the most current SSL
                            standard defined by the IETF and should be used if available.</p>
                            <h3>ALL</h3>
                            <p>Enables all SSL protocol variants.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="security">Security</td>
                        <td>
                            <p>You should not use SSLv2 if possible. The following examples is the recommended
                            configuration for the SSLProtocol directive. It will enable SSLv3 and TLSv1 and will
                            disable SSLv2.</p>
                            <pre>
SSLProtocol all -SSLv2
</pre>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <a id="sslCipherSuite"></a>
            <h2>SSLCipherSuite</h2>
            <table class="directive" title="directive">
                <thead>
                    <tr>
                        <th class="pivot">Description</th>
                        <th>Selects the Cipher suite to use when negotiating SSL sessions.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>SSLCipherSuite cipher-spec</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server, Virtual Host</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>LogLevel 2</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The SSLCipherSuite directive specifies the cipher algorithms to use when handshaking and
                            negotiating SSL sessions. It specifies the ciphers that Appweb will accept the client
                            using.</p>
                            <p>This is a complex directive. Don't change it unless you really know what you are doing.
                            It is easy to weaken your security via bad edits. The follow explanation has been taken
                            from the Apache documentation:</p>
                            <p>An SSL cipher specification in <em>cipher-spec</em> is composed of 4 major attributes
                            plus a few extra minor ones:</p>
                            <ul>
                                <li>Key Exchange Algorithm: RSA or Diffie-Hellman variants.</li>
                                <li>Authentication Algorithm: RSA, Diffie-Hellman, DSS or none.</li>
                                <li>Cipher/Encryption Algorithm: DES, Triple-DES, RC4, RC2, IDEA or none.</li>
                                <li>MAC Digest Algorithm: MD5, SHA or SHA1.</li>
                            </ul>
                            <p>An SSL cipher can also be an export cipher and is either a SSLv2 or SSLv3/TLSv1 cipher
                            (here TLSv1 is equivalent to SSLv3). To specify which ciphers to use, one can either
                            specify all the Ciphers, one at a time, or use aliases to specify the preference and order
                            for the ciphers (see Table 1).</p>
                            <table title="ciphers">
                                <tbody>
                                    <tr>
                                        <th>Tag</th>
                                        <th>Description</th>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><em>Key Exchange Algorithm:</em></td>
                                    </tr>
                                    <tr>
                                        <td><code>kRSA</code></td>
                                        <td>RSA key exchange</td>
                                    </tr>
                                    <tr>
                                        <td><code>kDHr</code></td>
                                        <td>Diffie-Hellman key exchange with RSA key</td>
                                    </tr>
                                    <tr>
                                        <td><code>kDHd</code></td>
                                        <td>Diffie-Hellman key exchange with DSA key</td>
                                    </tr>
                                    <tr>
                                        <td><code>kEDH</code></td>
                                        <td>Ephemeral Diffie-Hellman key exchange (no cert)</td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><em>Authentication Algorithm:</em></td>
                                    </tr>
                                    <tr>
                                        <td><code>aNULL</code></td>
                                        <td>No authentication</td>
                                    </tr>
                                    <tr>
                                        <td><code>aRSA</code></td>
                                        <td>RSA authentication</td>
                                    </tr>
                                    <tr>
                                        <td><code>aDSS</code></td>
                                        <td>DSS authentication</td>
                                    </tr>
                                    <tr>
                                        <td><code>aDH</code></td>
                                        <td>Diffie-Hellman authentication</td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><em>Cipher Encoding Algorithm:</em></td>
                                    </tr>
                                    <tr>
                                        <td><code>eNULL</code></td>
                                        <td>No encoding</td>
                                    </tr>
                                    <tr>
                                        <td><code>DES</code></td>
                                        <td>DES encoding</td>
                                    </tr>
                                    <tr>
                                        <td><code>3DES</code></td>
                                        <td>Triple-DES encoding</td>
                                    </tr>
                                    <tr>
                                        <td><code>RC4</code></td>
                                        <td>RC4 encoding</td>
                                    </tr>
                                    <tr>
                                        <td><code>RC2</code></td>
                                        <td>RC2 encoding</td>
                                    </tr>
                                    <tr>
                                        <td><code>IDEA</code></td>
                                        <td>IDEA encoding</td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><em>MAC Digest Algorithm</em>:</td>
                                    </tr>
                                    <tr>
                                        <td><code>MD5</code></td>
                                        <td>MD5 hash function</td>
                                    </tr>
                                    <tr>
                                        <td><code>SHA1</code></td>
                                        <td>SHA1 hash function</td>
                                    </tr>
                                    <tr>
                                        <td><code>SHA</code></td>
                                        <td>SHA hash function</td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><em>Aliases:</em></td>
                                    </tr>
                                    <tr>
                                        <td><code>SSLv2</code></td>
                                        <td>all SSL version 2.0 ciphers</td>
                                    </tr>
                                    <tr>
                                        <td><code>SSLv3</code></td>
                                        <td>all SSL version 3.0 ciphers</td>
                                    </tr>
                                    <tr>
                                        <td><code>TLSv1</code></td>
                                        <td>all TLS version 1.0 ciphers</td>
                                    </tr>
                                    <tr>
                                        <td><code>EXP</code></td>
                                        <td>all export ciphers</td>
                                    </tr>
                                    <tr>
                                        <td><code>EXPORT40</code></td>
                                        <td>all 40-bit export ciphers only</td>
                                    </tr>
                                    <tr>
                                        <td><code>EXPORT56</code></td>
                                        <td>all 56-bit export ciphers only</td>
                                    </tr>
                                    <tr>
                                        <td><code>LOW</code></td>
                                        <td>all low strength ciphers (no export, single DES)</td>
                                    </tr>
                                    <tr>
                                        <td><code>MEDIUM</code></td>
                                        <td>all ciphers with 128 bit encryption</td>
                                    </tr>
                                    <tr>
                                        <td><code>HIGH</code></td>
                                        <td>all ciphers using Triple-DES</td>
                                    </tr>
                                    <tr>
                                        <td><code>RSA</code></td>
                                        <td>all ciphers using RSA key exchange</td>
                                    </tr>
                                    <tr>
                                        <td><code>DH</code></td>
                                        <td>all ciphers using Diffie-Hellman key exchange</td>
                                    </tr>
                                    <tr>
                                        <td><code>EDH</code></td>
                                        <td>all ciphers using Ephemeral Diffie-Hellman key exchange</td>
                                    </tr>
                                    <tr>
                                        <td><code>ADH</code></td>
                                        <td>all ciphers using Anonymous Diffie-Hellman key exchange</td>
                                    </tr>
                                    <tr>
                                        <td><code>DSS</code></td>
                                        <td>all ciphers using DSS authentication</td>
                                    </tr>
                                    <tr>
                                        <td><code>NULL</code></td>
                                        <td>all ciphers using no encryption</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p>Now where this becomes interesting is that these can be put together to specify the
                            order and ciphers you wish to use. To speed this up there are also aliases (<code>SSLv2,
                            SSLv3, TLSv1, EXP, LOW, MEDIUM, HIGH</code>) for certain groups of ciphers. These tags can
                            be joined together with prefixes to form the <em>cipher-spec</em>. Available prefixes
                            are:</p>
                            <ul>
                                <li>none: add cipher to list</li>
                                <li><code>+</code>: add ciphers to list and pull them to current location in list</li>
                                <li><code>-</code>: remove cipher from list (can be added later again)</li>
                                <li><code>!</code>: kill cipher from list completely (can <strong>not</strong> be added
                                later again)</li>
                            </ul>
                            <p>A simpler way to look at all of this is to use the ``<code>openssl ciphers -v</code>''
                            command which provides a nice way to successively create the correct <em>cipher-spec</em>
                            string. The default <em>cipher-spec</em> string is:<code><br /></code></p>
                            <pre>
<code>ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP+eNULL</code>
</pre>
                            <p>which means the following: first, remove from consideration any ciphers that do not
                            authenticate, i.e. for SSL only the Anonymous Diffie-Hellman ciphers. Next, use ciphers
                            using RC4 and RSA. Next include the high, medium and then the low security ciphers. Finally
                            <em>pull</em> all SSLv2 and export ciphers to the end of the list.<br /></p>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <a id="sslCertificateFile"></a>
            <h2>SSLCertificateFile</h2>
            <table class="directive" title="directive">
                <thead>
                    <tr>
                        <th class="pivot">Description</th>
                        <th>Defines the location of the X.509 file containing the server certificate</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>SSLCertificateFile path</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server, Virtual Host</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>SSLCertificateFile /var/appweb/server.crt</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The SSLCertificateFile directive defines the file containing the PEM encoded X.509
                            certificate for the server. The file may also contain the private key for the server in
                            which case you do not need to use the SSLCertificateKeyFile directive.</p>
                            <p>The path may be an absolute path or it may be relative to the ServerRoot.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <a id="sslCertificateKeyFile"></a>
            <h2>SSLCertificateKeyFile</h2>
            <table class="directive" title="directive">
                <thead>
                    <tr>
                        <th class="pivot">Description</th>
                        <th>Defines the location of the server's private key</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>SSLCertificateKeyFile</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server, Virtual Host</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>SSLCertificateKeyFile /var/appweb/server.key.pem</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The SSLCertificateKeyFile directive defines the file containing the PEM encoded private
                            key file for the server. This directive is not required if the server's private key is
                            combined with the certificate file.</p>
                            <p>If the private key is encrypted, you will be prompted to enter the pass-phrase to
                            decrypt the private key on system reboot.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="security">Security</td>
                        <td>There is a dilemma here. If you use an encrypted private key, the server will pause until you
                        enter the pass-phrase which makes headless operation impossible. If you do not encrypt the
                        private key, your private key is more vulnerable should the server be compromised. Which option
                        you choose depends on whether headless operation is essential or not.</td>
                    </tr>
                </tbody>
            </table>
            
            <a id="sslCaCertificateFile"></a>
            <h2>SSLCACertificateFile</h2>
            <table class="directive" title="directive">
                <thead>
                    <tr>
                        <th class="pivot">Description</th>
                        <th>Defines the location of the certificate file for client authentication</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>SSLCACertificateFile path</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server, Virtual Host</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>SSLCACertificateFile /var/appweb/ca.crt</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The SSLCACertificateFile directive defines the file containing the certificates to use
                            when authenticating client certificates. This directive is only necessary if you wish to
                            verify client certificates. If so, you must specify the "SSLVerifyClient Require"
                            directive.</p>
                            <p>The certificate file contains the concatenated certificates to use in preference order.
                            The path may be an absolute path or it may be relative to the ServerRoot.</p>
                            <p>You may alternatively use SSLCACertificatePath if you have separate certificates.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <a id="sslCaCertificatePath"></a>
            <h2>SSLCACertificatePath</h2>
            <table class="directive" title="directive">
                <thead>
                    <tr>
                        <th class="pivot">Description</th>
                        <th>Defines the directory containing the certificates to use for client authentication.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>SSLCACertificatePath</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server, Virtual Host</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>SSLCACertificatePath /var/appweb/certs</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The SSLCACertificatePath directive defines the directory containing the certificates to
                            use when authenticating client certificates. This directive is only necessary if you wish
                            to verify client certificates. If so, you must specify the "SSLVerifyClient Require"
                            directive.</p>
                            <p>The path may be an absolute path or it may be relative to the ServerRoot.</p>
                            <p>You may alternatively use SSLCACertificateFile if you have a bundle of certificates
                            concatenated together.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <a id="sslVerifyClient"></a>
            <h2>SSLVerifyClient</h2>
            <table class="directive" title="directive">
                <thead>
                    <tr>
                        <th class="pivot">Description</th>
                        <th>Defines the type of client certificate verification.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>SSLVerifyClient [none | require]</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default Server, Virtual Host, Route</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>SSLVerifyClient require</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>This directive controls whether the client must provide a client certificate for the
                            server to verify the identity of the client. If set to <b>none</b>, no certificate is
                            required. If one is supplied, it will be ignored.</p>
                            <p>If the directive is set to <b>required</b>, the client must provide a valid
                            certificate.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
<!-- BeginDsi "dsi/bottom.html" -->
	<div class="bottom">
		<p class="footnote"> 
            <a href="../../../../product/copyright.html" >&copy; Embedthis Software LLC, 2003-2012.
            All rights reserved. Embedthis, ESP, Ejscript and Appweb are trademarks of Embedthis Software LLC.</a>
		</p>
	</div>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript"> 
      google.load('search', '1', {language : 'en'});
      google.setOnLoadCallback(function() {
        var customSearchControl = new google.search.CustomSearchControl(
          '000262706376373952077:1hs0lhenihk');
        customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
        var options = new google.search.DrawOptions();
        options.enableSearchboxOnly("http://appwebserver.org/search.html");
        customSearchControl.draw('cse-search-form', options);
      }, true);
    </script>
</body>
</html>
