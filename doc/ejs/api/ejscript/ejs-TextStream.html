<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Class TextStream</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>TextStream</h1>
<div class='classBlock'>
<table class='classHead' summary='TextStream'>
   <tr><td><strong>Module</strong></td><td>ejs</td></tr>
   <tr><td><strong>Definition</strong></td><td> class TextStream</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>TextStream <img src='images/inherit.gif' alt='inherit'/> <a href='ejs-Object.html'>Object</a>       </td></tr>
</table>

<p class='classBrief'>Create a text filter stream.</p>

<p class='classDescription'>A Text filter stream must be stacked upon a stream source such as a File.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' summary='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='available'></a>
   <tr><td nowrap align='left'>public const get </td><td>available</td><td><a href='ejs-Number.html'>Number</a></td><td>The number of bytes available to read without blocking. This is the number of bytes buffered internally
by this stream. It does not include any data buffered downstream.</td></tr>
</table>

<p class='inheritedLink'><a href='ejs-Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='Methods'></a>
<h2 class='classSection'>TextStream Methods</h2>
<table class='apiIndex' summary='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#close'><b>close</b></a>(): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Close the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#fill'><b>fill</b></a>(): <a href='ejs-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Fill the input buffer from upstream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#flush'><b>flush</b></a>(dir: <a href='ejs-Number.html'>Number</a> = expression): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Flush the stream and underlying streams.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#off'><b>off</b></a>(name, observer: <a href='ejs-Function.html'>Function</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove an observer from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#on'><b>on</b></a>(name, observer: <a href='ejs-Function.html'>Function</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add an observer to the stream for the named events.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#read'><b>read</b></a>(buffer: <a href='ejs-ByteArray.html'>ByteArray</a>, offset: <a href='ejs-Number.html'>Number</a> = 0 , count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read characters from the stream into the supplied byte array.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#readLine'><b>readLine</b></a>(): <a href='ejs-String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a line from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#readLines'><b>readLines</b></a>(numLines: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-Array.html'>Array</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a required number of lines of data from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#readString'><b>readString</b></a>(count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a string from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#write'><b>write</b></a>(data: <a href='ejs-Array.html'>Array</a>): <a href='ejs-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write characters to the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#writeLine'><b>writeLine</b></a>(lines: <a href='ejs-Array.html'>Array</a>): <a href='ejs-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write text lines to the stream.</td></tr>
</table>

<p class='inheritedLink'><a href='ejs-Object.html#Methods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='close'></a>
<div class='api'>
<div class='apiSig'>const   public  close(): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Close the stream.</p>
<dl><dt>Events</dt>
<dd><table class='parameters' summary ='events'>
<td class='param'>close</td><td>A close event is issued before closing the stream.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='fill'></a>
<div class='api'>
<div class='apiSig'>const   public  fill(): <a href='ejs-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Fill the input buffer from upstream.</p>
<dl><dt>Returns</dt>
<dd>The number of new characters added to the input bufer.</dd></dl>
</div>
</div>
<hr />
<a name='flush'></a>
<div class='api'>
<div class='apiSig'>const   public  flush(dir: <a href='ejs-Number.html'>Number</a> = expression): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Flush the stream and underlying streams.</p>
<dl><dt>Description</dt><dd>A supplied flush <a href='#direction'>direction</a> argument modifies the effect of this call.
If direction is set to Stream.READ, then all read data is discarded. If direction is set to Stream.WRITE, 
any buffered data is written. Stream.BOTH will cause both directions to be flushed.  If the stream is in 
sync mode, this call will block until all data is written. If the stream is in async mode, it will attempt 
to write all data but will return immediately</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>dir: <a href='ejs-Number.html'>Number</a> </td><td> [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='off'></a>
<div class='api'>
<div class='apiSig'>const   public  off(name, observer: <a href='ejs-Function.html'>Function</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Remove an observer from the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name </td><td>Event name previously used with observe. The name may be an array of events.</td></tr><tr class='param'><td class='param'>observer: <a href='ejs-Function.html'>Function</a> </td><td>Observer function previously used with observe.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='on'></a>
<div class='api'>
<div class='apiSig'>const   public  on(name, observer: <a href='ejs-Function.html'>Function</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add an observer to the stream for the named events.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name </td><td>Name of the event to listen for. The name may be an array of events.</td></tr><tr class='param'><td class='param'>observer: <a href='ejs-Function.html'>Function</a> </td><td>Callback observer function. The function is called with the following signature: function observer(event: String, ...args): Void.</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' summary ='events'>
<td class='param'>readable</td><td>Issued when the stream becomes readable.</td></tr>
<td class='param'>writable</td><td>Issued when the stream becomes writable.</td></tr>
<td class='param'>close</td><td>Issued when stream is being closed.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='read'></a>
<div class='api'>
<div class='apiSig'>const   public  read(buffer: <a href='ejs-ByteArray.html'>ByteArray</a>, offset: <a href='ejs-Number.html'>Number</a> = 0 , count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Read characters from the stream into the supplied byte array.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>buffer: <a href='ejs-ByteArray.html'>ByteArray</a> </td><td>Destination byte array for the read data.</td></tr><tr class='param'><td class='param'>offset: <a href='ejs-Number.html'>Number</a> </td><td>Offset in the byte array to place the data. If the offset is -1, then data is appended to the buffer write <a href='#position'>position</a> which is then updated. [default: 0 ]</td></tr><tr class='param'><td class='param'>count: <a href='ejs-Number.html'>Number</a> </td><td>Number of characters to read. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A count of characters actually read.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if an I/O error occurs.  
</dd>
</dl></div>
</div>
<hr />
<a name='readLine'></a>
<div class='api'>
<div class='apiSig'>const   public  readLine(): <a href='ejs-String.html'>String</a>
</div>
<div class='apiDetail'>
<p>Read a line from the stream.</p>
<dl><dt>Returns</dt>
<dd>A string containing the next line without newline characters ("\r", "\n"). Return null on eof.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if an I/O error occurs. 
</dd>
</dl></div>
</div>
<hr />
<a name='readLines'></a>
<div class='api'>
<div class='apiSig'>const   public  readLines(numLines: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-Array.html'>Array</a>
</div>
<div class='apiDetail'>
<p>Read a required number of lines of data from the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>numLines: <a href='ejs-Number.html'>Number</a> </td><td>Of lines to read. Defaults to read all lines. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>Array containing the read lines. Lines are stripped of newline characters ("\r", "\n").  Return null on eof.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if an I/O error occurs.  
</dd>
</dl></div>
</div>
<hr />
<a name='readString'></a>
<div class='api'>
<div class='apiSig'>const   public  readString(count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-String.html'>String</a>
</div>
<div class='apiDetail'>
<p>Read a string from the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>count: <a href='ejs-Number.html'>Number</a> </td><td>Of bytes to read. Returns the entire stream contents if count is -1. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A string or null on eof.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if an I/O error occurs.  
</dd>
</dl></div>
</div>
<hr />
<a name='write'></a>
<div class='api'>
<div class='apiSig'>const   public  write(data: <a href='ejs-Array.html'>Array</a>): <a href='ejs-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Write characters to the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>data: <a href='ejs-Array.html'>Array</a> </td><td>String to write.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The total number of bytes that were written.</dd></dl>
</div>
</div>
<hr />
<a name='writeLine'></a>
<div class='api'>
<div class='apiSig'>const   public  writeLine(lines: <a href='ejs-Array.html'>Array</a>): <a href='ejs-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Write text lines to the stream.</p>
<dl><dt>Description</dt><dd>The text line is written after appending the system text newline character(s).</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>lines: <a href='ejs-Array.html'>Array</a> </td><td>Text lines to write.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The number of characters written or -1 if unsuccessful.</dd></dl>
</div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="http://www.embedthis.com/">       Embedthis Software LLC, 2003-2010. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
