<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- BeginDsi "dsi/head.html" -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Embedthis Ejscript 2.0.0 Documentation</title>
    <meta name="keywords" content="Ejscript, JavaScript, ECMAScript, Server-Side JavaScript, Dynamic languages, 
        Embedded, AJAX, language"/>
	<meta name="description" content="Ejscript -- Embedded Server-Side JavaScript Language."/>
	<meta name="robots" content="index,follow" />
	<link href="../../../doc.css" rel="stylesheet" type="text/css" />
	<link href="../../../print.css" rel="stylesheet" type="text/css" media="print"/>
    <!--[if IE]>
    <link href="../../../iehacks.css" rel="stylesheet" type="text/css" />
    </![endif]-->
</head>

<body>
    <div class="top">
        <a class="logo"  href="http://www.ejscript.org/">&nbsp;</a>
        <div class="topRight">
             <div class="search">
                 <form method="get" action="http://www.google.com/search" title="Search www.embedthis.com">
                     <p>
                        <label title="Search">Search</label> 
                        <input type="text" id="q" name="q" size="15" maxlength="255" />
                        <input type="submit" id="submit" value="Go" /> 
                        <input type="hidden" name="domains" value="embedthis.com" /> 
                        <input type="hidden" name="sitesearch" value="embedthis.com" />
                    </p>
                 </form>
              </div>
            <!--TITLE-->Embedthis Ejscript 2.0.0
        </div>
        <div class="crumbs">
            <a href="../../../product/index.html">Home</a>
<!-- EndDsi -->
             &gt; <a href="../language/index.html">Language Guide</a> &gt; <b>Language Modes</b>
        </div>
    </div>
    <div class="content">
        <div class="contentRight">
            <h2>Quick Nav</h2>
            <ul>
                <li><a href="#modes">Mode Controls</a></li>
                <li><a href="#lang">Language Compliance</a></li>
                <li><a href="#ecma">Ecma Mode</a></li>
                <li><a href="#plus">Plus Mode</a></li>
                <li><a href="#fixed">Fixed Mode</a></li>
                <li><a href="#mixing">Mixing Modes</a></li>
                <li><a href="#setLang">Setting Language Mode</a></li>
                <li><a href="#compiler">Compiler Checking Mode</a></li>
                <li><a href="#standard">Standard Mode</a></li>
                <li><a href="#strict">Strict Mode</a></li>
                <li><a href="#setCompiler">Setting Language</a></li>
            </ul>
<!-- BeginDsi "dsi/ejsLanguageSeeAlso.html" -->
		        <h2>See Also</h2>
		        <ul>
		          <li><a href="../../../guide/ejs/overview.html">Overview</a></li>
		          <li><a href="../../../guide/ejs/features.html">Language Features</a></li>
		          <li><a href="../../../guide/ejs/language/modes.html">Language Modes</a></li>
		          <li><a href="../../../guide/ejs/language/syntax.html">Language Syntax</a></li>
		          <li><a href="../../../guide/ejs/language/statements.html">Statements</a></li>
		          <li><a href="../../../guide/ejs/language/expressions.html">Expressions</a></li>
		          <li><a href="../../../guide/ejs/language/objects.html">Objects and Arrays</a></li>
		          <li><a href="../../../guide/ejs/language/functions.html">Functions and Methods</a></li>
		          <li><a href="../../../guide/ejs/language/core.html">Core Language Types</a></li>
		          <li><a href="../../../guide/ejs/language/types.html">Types and Declarations</a></li>
		          <li><a href="../../../guide/ejs/language/classes.html">Classes</a></li>
		          <li><a href="../../../guide/ejs/language/modules.html">Modules</a></li>
		          <li><a href="../../../guide/ejs/language/library.html">System Library</a></li>
		          <li><a href="../../../guide/ejs/language/events.html">Events and Timers</a></li>
		          <li><a href="../../../guide/ejs/language/globals.html">Globals</a></li>

		          <li><a href="../../../guide/ejs/users/compiler.html">Using the Compiler</a></li>
		          <li><a href="../../../guide/ejs/users/shell.html">Command Shell</a></li>
		          <li><a href="../../../guide/ejs/users/ejsvm.html">Virtual Machine</a></li>
		        </ul>
<!-- EndDsi -->
        </div>
        <div class="contentLeft">
            <h1>Language Modes</h1>
            <p>Ejscript is fully compliant with the JavaScript (<a href=
            "http://www.ecma-international.org/publications/standards/Ecma-262.htm">ECMA-262 3.X</a>) standards, but it
            also offers a set of enhancements and fixes designed to improve the language and correct some longstanding
            JavaScript design issues. Use of these enhancements and fixes is optional and controlled via <i>opt-in</i>
            configuration and script pragma directives. Language modes can be selected on a source file-by-file basis.
            So you can mix and match ECMA-262 pure JavaScript with enhanced Ejscript code if you wish.</p><a name=
            "modes" id="modes"></a>
            <h3>Mode Controls</h3>
            <p>Ejscript provides two control mechanisms:</p>
            <ul>
                <li>A <a href="#lang">Language Compliance Mode</a> control</li>
                <li>A <a href="#compiler">Compiler Error Checking Mode</a> control</li>
            </ul><a name="lang" id="lang"></a>
            <h2 class="section">Language Compliance Mode</h2>
            <p>The language compliance mode dictates what language statements and directives are available. The
            language mode can be configured by a <b>use lang</b> pragma directive in your scripts. This pragma takes
            effect on a file by file basis and so allows libraries and programs from various sources to select the mode
            that best suits their needs.</p>
            <p>Ejscript supports three language compliance modes.</p>
            <ol>
                <li><b>ecma</b> &mdash; Strict ECMA-262 3.X compliance.</li>
                <li><b>plus</b> &mdash; Close ECMA-262 3.X compliance with enhancements.</li>
                <li><b>fixed</b> &mdash; Close ECMA-262 3.X compliant with enhancements and some compatibility breaking
                fixes.</li>
            </ol><a name="ecma" id="ecma"></a>
            <h3>Ecma Mode</h3>
            <p>Code running in <b>ecma</b> mode has all the available features and capabilities of the ECMA-262
            specification. No Ejscript enhancements or fixes are available. This mode is useful for JavaScript code
            designed for browsers or other JavaScript engines.</p><a name="plus" id="plus"></a>
            <h3>Plus Mode</h3>
            <p>Code running in <b>plus</b> mode has access to all of ECMA-262 and the Ejscript enhancements which are
            closely compatibile with ECMA-262. This mode is useful to migrate code from ecma mode and to gradually take
            advantage of Ejscript enhancements.</p>
            <p>This mode does introduce new keywords, directives and statements into the language. The enhancements
            available in this mode include:</p>
            <ul>
                <li>Variable visibility controls</li>
                <li>Block and file scope</li>
                <li>Optional type annotations</li>
                <li>Class, extends, super directives</li>
                <li>Interface directive</li>
                <li>Module directive</li>
                <li>Namespaces</li>
                <li>Use pragmas</li>
                <li>Extended language library: Http, File I/O, Sockets, Stream I/O, XML, Eventing</li>
                <li>Cast, is operators</li>
                <li>E4X XML support</li>
                <li>Iterators and Generators</li>
                <li>Assertions</li>
                <li>Conditional compilation</li>
                <li>Let variable declarations</li>
                <li>Automatic type conversion for function arguments</li>
                <li>Extended try / catch syntax</li>
                <li>Extended operators</li>
                <li>Reflection</li>
                <li>Function rest arguments</li>
            </ul><a name="fixed" id="fixed"></a>
            <h3>Fixed Mode</h3>
            <p>Code running in <b>fixed</b> mode has access to all of ECMA-262 and all the Ejscript enhancements.
            Further, this mode fixes some ECMA-262 deficiencies and thus introduces some breaking changes. This mode is
            the most secure and capable language mode.</p>
            <p>The fixes include:</p>
            <ul>
                <li>Assignments to undeclared variables inside functions will create local variables instead of
                creating unwanted globals.</li>
                <li>Multiple declarations of a variable name at the same scope are prohibited.</li>
                <li>Warn if a function call supplies insufficient actual parameters.</li>
            </ul><a name="mixing" id="mixing"></a>
            <h3>Mixing Modes</h3>
            <p>The language mode applies at the source file level and it is perfectly acceptable to include code in one
            program that uses different modes. For example: a library provided by one vendor may be designed to run in
            fixed mode, whereas the main program from another vendor may expect to run in ecma mode. The Ejscript
            compiler and VM apply the appropriate language specification depending on the function code that is being
            compiled or run from time-to-time.</p><a name="setLang" id="setLang"></a>
            <h2 class="section">Setting the Language Mode</h2>
            <p>The language mode control is set to a default value by the <b>configure</b> program when Ejscript is
            build from source. The default value can then be modified by command line switches to the <b>ejs</b> shell
            or <b>ec</b> compiler. In turn, this can be overridden by an Ejscript pragma directive in your script
            files.</p>
            <h3>Configure Language Switch</h3>
            <p>To set the language mode for the configure command when building Ejscript from source, use the
            <b>--lang</b> switch. The switch takes the values: ecma, plus or fixed. The default is <b>plus</b>. This
            setting defines the global default setting for the language compliance mode.</p>
            <pre>
./configure --lang=ecma
./configure --lang=plus
./configure --lang=fixed
</pre>
            <h3>Command Line Language Switch</h3>
            <p>To set the language mode on the <b>ejs</b> or <b>ec</b> commands, use the <b>--lang</b> switch. The
            switch takes the values: ecma, plus or fixed. This will override the value defined by the <b>configure</b>
            command and defines the default setting when compiling or interpreting programs.</p>
            <pre>
ejs --lang=ecma script1.es
ejs --lang=plus script2.es
ejs --lang=fixed scrip3t.es
</pre>
            <h3>Use Language Pragma</h3>
            <p>To set the language mode for a source file, utilize the <b>use lang</b> pragma directive. The directive
            takes the values: ecma, plus or fixed. This pragma will override the value defined by the <b>configure</b>
            command or by the <b>ec</b> or <b>ejs</b> commands.</p>
            <pre>
/* In source file 1 */
use lang ecma
/* In source file 2 */
use lang fixed
/* In source file 3 */
/* No use pragma - just accept the current default */
</pre><a name="compiler" id="compiler"></a>
            <h2 class="section">Compiler Checking Mode</h2>
            <p>The Compiler checking mode controls how aggressively the compiler warns about potential program
            errors.</p>
            <p>Ejscript supports two checking modes:</p>
            <ol>
                <li><b>standard</b> &mdash; Traditional JavaScript compilation with little compile time checking</li>
                <li><b>strict</b> &mdash; Uses strict static type checking at compile time</li>
            </ol>
            <p>Strict mode is useful for libraries where detecting errors before run-time is highly desirable. Strict
            mode also assists the compiler to generate faster code as the compiler knows the location and type of all
            variables ahead of time. However, it does restrict your coding style by requiring that all variables be
            declared and typed &mdash; this should be used on a case-by-case basis.</p>
            <p>For users of a module, it does not matter whether the module was created using strict or standard
            checking. The checking mode only impacts the module source code itself and not the users of the module.</p>
            <p>The compiler checking mode can be controlled by a <b>use standard</b> or <b>use strict</b> pragma
            directive in your scripts. Like the Language Compliance pragma, this pragma takes effect on a file by file
            basis.</p><a name="standard" id="standard"></a>
            <h3>Standard Mode</h3>
            <p>Standard mode is the traditional JavaScript compilation behavior. Variables do not have to be declared
            ahead of time and no warnings are issued for incompatible type usage. Issues are resolved at run-time, by
            dynamic casting or by issuing exceptions.</p><a name="strict" id="strict"></a>
            <h3>Strict Mode</h3>
            <p>Strict mode applies compile time static checking and type conversions to try to handle and catch errors
            before run-time. In strict mode, variables must be declared before they are used. If the script code is not
            using <b>ecma</b> language compliance, variables must also be typed. Functions must define a return type
            and must type their parameters.</p><a name="setCompiler" id="setCompiler"></a>
            <h2 class="section">Setting the Compiler Checking Mode</h2>
            <p>The compiler mode control is set to a default value by command line switches to the <b>ejs</b> shell or
            <b>ec</b> compiler. This can be overridden by an Ejscript pragma directive in your script files on a
            file-by-file basis.</p>
            <h3>Command Line Compiler Checking Switch</h3>
            <p>To set the compiler checking mode on the <b>ejs</b> or <b>ec</b> commands, use the <b>--strict</b> or
            <b>--standard</b> switch. The default is --standard.</p>
            <pre>
ejs --standard script1.es
ejs --strict script2.es
</pre>
            <h3>Use Strict and Use Standard Pragmas</h3>
            <p>To set the compiler checking mode for a source file, utilize the <b>use strict</b> or <b>use
            standard</b> pragma directives. These pragmas will override the default value for the current source
            file.</p>
            <pre>
/* In source file 1 */
use strict
/* In source file 2 */
use standard
/* In source file 3 */
/* No use pragma - just accept the current default */
</pre>
        </div>
    </div>
<!-- BeginDsi "dsi/bottom.html" -->
	<div class="bottom">
		<p class="footnote"> 
            <a href="../../../product/copyright.html" >&copy; Embedthis Software LLC, 2003-2011. 
            All rights reserved. Embedthis, Ejscript and Appweb are trademarks of Embedthis Software LLC.</a>
		</p>
	</div>
<!-- EndDsi -->
</body>
</html>
